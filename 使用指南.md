# AI Email Coach - 使用指南

## 🎯 系统概述

AI Email Coach 是一个完全自动化的任务管理系统，通过邮件和飞书提醒你复盘任务，使用 AI 解析你的回复并自动更新数据库。

## ⏰ 每日时间安排

### 22:00 - 每日复盘提醒
系统自动发送复盘提醒到：
- 📧 邮箱：15302814198@163.com
- 📱 飞书

内容包括：
- 今日任务清单（带进度条）
- 提示你复盘今日完成情况
- 提示你制定明日计划

### 23:00 - 每日跟进提醒
系统自动发送跟进提醒到：
- 📧 邮箱
- 📱 飞书

内容包括：
- 提醒你尽快回复（如已回复可忽略）
- 再次显示任务清单

### 23:30 - 检查邮件回复
系统自动：
1. ✅ 检查邮件回复（只处理标题为「回复：📊 每日复盘提醒」或「回复：📊 每日跟进提醒」的邮件）
2. ✅ 使用 AI 解析回复内容
3. ✅ 自动更新数据库
4. ✅ 发送反馈到飞书和邮箱

**如果没有找到符合标题的回复**：
- 发送提醒到飞书和邮箱
- 告知你如需修改计划请到 GitHub 手动运行 workflow

## 📧 如何回复邮件

### 重要：必须回复正确的邮件

系统只会处理以下标题的邮件回复：
- ✅ 回复：📊 每日复盘提醒
- ✅ Re: 📊 每日复盘提醒
- ✅ 回复：📊 每日跟进提醒
- ✅ Re: 📊 每日跟进提醒

**请直接回复这两封邮件中的任意一封！**

### 回复格式示例

用自然语言即可，AI 会自动识别：

```
完成了用户登录功能90%，这是Q1任务
明天做数据库设计Q2任务，这是Q2任务
```

或者：

```
今天完成了用户登录功能，进度90%，Q1任务
明天计划做数据库设计，Q2任务
```

AI 会自动识别：
- 任务名称
- 进度百分比（0-100）
- 象限（Q1/Q2/Q3/Q4）
- 动作（更新/暂缓/完成）

## 🔧 手动修改计划

如果需要修改计划，请访问：
https://github.com/Zihui1112/ai-email-coach/actions

手动运行「处理用户回复」workflow

## 📊 其他自动功能

### 周报（每周一 09:00）
自动生成上周的任务完成情况周报

### 月报（每月1号 09:00）
自动生成上月的任务完成情况月报

## 🗂️ 项目结构

```
ai-email-coach/
├── .github/workflows/          # GitHub Actions 工作流
│   ├── daily_review.yml       # 每日复盘提醒（22:00）
│   ├── daily_followup.yml     # 每日跟进提醒（23:00）
│   ├── check_email_reply.yml  # 检查邮件回复（23:30）
│   ├── process_reply.yml      # 手动处理回复
│   ├── weekly_report.yml      # 周报
│   └── monthly_report.yml     # 月报
├── scripts/                    # Python 脚本
│   ├── daily_review.py        # 每日复盘提醒脚本
│   ├── daily_followup.py      # 每日跟进提醒脚本
│   ├── check_email_reply.py   # 检查邮件回复脚本
│   ├── process_reply_simple.py # 处理回复脚本
│   ├── weekly_report.py       # 周报脚本
│   └── monthly_report.py      # 月报脚本
├── database_setup.sql          # 数据库初始化脚本
├── fix_rls_policy.sql         # 数据库权限修复脚本
├── requirements.txt            # Python 依赖
├── .env.example               # 环境变量示例
└── README.md                  # 项目说明
```

## 🔑 环境变量配置

需要在 GitHub Secrets 中配置以下变量：

1. `SUPABASE_URL` - Supabase 项目 URL
2. `SUPABASE_KEY` - Supabase service_role key
3. `DEEPSEEK_API_KEY` - DeepSeek AI API key
4. `FEISHU_WEBHOOK_URL` - 飞书 Webhook URL
5. `EMAIL_163_USERNAME` - 163 邮箱地址
6. `EMAIL_163_PASSWORD` - 163 邮箱授权码

## 📈 监控运行状态

访问：https://github.com/Zihui1112/ai-email-coach/actions

- ✅ 绿色勾：运行成功
- ❌ 红色叉：运行失败
- 🟡 黄色圆：正在运行

点击任意运行记录可以查看详细日志。

## ⚠️ 注意事项

### GitHub Actions 定时任务
- 可能有 5-15 分钟延迟
- 首次配置后可能需要 24 小时才会开始自动运行
- 如果仓库长期不活跃，定时任务可能被暂停

### 邮件回复
- 必须回复标题包含「📊 每日复盘提醒」或「📊 每日跟进提醒」的邮件
- 回复时间需要在最近 2 小时内
- 系统会自动选择最新的符合条件的回复

### 数据库
- 使用 Supabase 云数据库
- RLS（行级安全）已禁用
- 可以在 Supabase 控制台查看数据

## 🎉 完全自动化

你只需要：
1. 每天收到邮件提醒
2. 回复邮件更新任务进度
3. 收到反馈确认

其他一切都自动完成！无需开电脑，无需手动运行任何程序。🚀
