# 完整测试步骤

## 准备工作

### 1. 添加 GitHub Secret

访问：https://github.com/Zihui1112/ai-email-coach/settings/secrets/actions

添加新的 Secret：
- Name: `EMAIL_163_PASSWORD`
- Value: `JSewF34VrE5GGNwQ`

---

## 测试流程

### 测试 1：发送邮件（已完成 ✅）

刚才已经成功发送测试邮件到你的邮箱！

请检查邮箱：15302814198@163.com

---

### 测试 2：回复邮件

1. 打开你的邮箱
2. 找到刚才收到的邮件（主题：📊 测试邮件 - 每日复盘提醒）
3. 直接回复邮件，内容例如：
   ```
   完成了用户登录功能95%，这是Q1任务
   明天做数据库优化Q2任务
   ```
4. 发送回复

---

### 测试 3：本地测试检查邮件回复

回复邮件后，运行本地测试：

```bash
python test_check_reply.py
```

这会：
1. 连接到你的邮箱
2. 检查最新的回复
3. 使用 AI 解析内容
4. 更新数据库
5. 发送反馈到飞书

---

### 测试 4：GitHub Actions 完整测试

#### 4.1 测试发送邮件

1. 访问：https://github.com/Zihui1112/ai-email-coach/actions
2. 选择 **"每日复盘提醒"** workflow
3. 点击 **"Run workflow"**
4. 等待运行完成
5. 检查邮箱和飞书是否收到消息

#### 4.2 回复邮件

收到邮件后，直接回复：
```
完成了数据库设计60%，这是Q2任务
```

#### 4.3 测试检查邮件回复

1. 访问：https://github.com/Zihui1112/ai-email-coach/actions
2. 选择 **"检查邮件回复"** workflow
3. 点击 **"Run workflow"**
4. 等待运行完成
5. 检查飞书是否收到反馈消息

---

## 预期结果

### 发送邮件后

你应该收到：
- ✅ 邮箱：一封复盘提醒邮件
- ✅ 飞书：一条复盘提醒消息

### 回复邮件后（23:00 或手动触发）

你应该收到：
- ✅ 飞书：一条任务更新反馈消息，包含：
  - 任务名称
  - 进度条
  - 象限
  - 状态

---

## 常见问题

### Q: 本地测试时提示 SUPABASE_KEY 未设置？

A: 运行前设置环境变量：
```bash
$env:SUPABASE_KEY="你的service_role_key"
python test_check_reply.py
```

### Q: GitHub Actions 失败？

A: 检查：
1. 是否添加了 EMAIL_163_PASSWORD secret
2. 所有 secrets 是否正确配置
3. 查看 Actions 日志了解具体错误

### Q: 没有收到邮件？

A: 检查：
1. 163 邮箱授权码是否正确
2. 邮件是否在垃圾箱
3. 查看 Actions 日志确认是否发送成功

### Q: 飞书没有收到反馈？

A: 检查：
1. 是否真的回复了邮件
2. 回复时间是否在今天 22:00 之后
3. 查看 Actions 日志确认是否检测到回复

---

## 完整自动化时间表

配置完成后，系统将自动：

- **每天 22:00** - 发送复盘提醒（邮件+飞书）
- **每天 23:00** - 检查邮件回复并反馈
- **每周日 21:00** - 发送周报
- **每月1号 21:00** - 发送月报

---

## 开始测试吧！

1. ✅ 添加 GitHub Secret
2. ✅ 发送测试邮件（已完成）
3. 📧 回复邮件
4. 🧪 运行测试脚本
5. 🚀 GitHub Actions 测试

祝测试顺利！🎉
